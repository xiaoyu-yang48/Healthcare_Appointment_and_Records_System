# IFN636: 软件生命周期管理
## 评估1: 软件需求分析与设计
### 全栈CRUD应用开发与DevOps实践

---

**总分: 20分**

**分数分布:**
- 使用SysML的项目设计: 3分
- 使用JIRA的项目管理: 4分
- 后端开发 (Node.js + Express + MongoDB): 3分
- 前端开发 (React.js): 2分
- GitHub版本控制与分支策略: 2分
- CI/CD流水线设置: 5分
- README.md和报告: 1分

**姓名:** [您的姓名]  
**学号:** [您的学号]  
**导师姓名:** [导师全名]  
**辅导课时间:** [辅导课安排]  

**EC2实例名称和ID:** [您的EC2实例详情]  
**EC2实例链接:** [您的EC2公网IP]  

---

## 1. 项目概述

本项目实现了一个全面的**医疗预约和记录管理系统**，使用MERN (MongoDB, Express.js, React.js, Node.js) 技术栈。该系统提供了一个功能完整的平台，用于管理医疗预约、患者记录、医生排班以及医疗提供者与患者之间的沟通。

### 主要功能:
- **多角色用户管理**: 患者、医生和管理员
- **预约调度**: 完整的预约生命周期管理
- **电子病历**: 全面的患者记录管理
- **实时消息**: 医患沟通系统
- **通知系统**: 自动通知，支持国际化
- **响应式设计**: 使用Material-UI组件的现代UI
- **国际化**: 完整的英语和中文语言支持

### 技术栈:
- **前端**: React 18, Material-UI, React Router DOM, Axios
- **后端**: Node.js, Express.js, JWT认证, Multer
- **数据库**: MongoDB with Mongoose ODM
- **DevOps**: GitHub Actions, PM2, Nginx
- **测试**: Mocha, Chai, Jest

---

## 2. 项目设计

### 2.1 使用SysML的需求图

```
┌─────────────────────────────────────────────────────────────────┐
│                    医疗预约系统                                │
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐  │
│  │   患者          │    │   医生          │    │   管理员    │  │
│  │   (Patient)     │    │   (Doctor)      │    │   (Admin)   │  │
│  │                 │    │                 │    │             │  │
│  │ • 注册          │    │ • 管理排班      │    │ • 管理用户  │  │
│  │ • 登录          │    │ • 查看预约      │    │ • 查看统计  │  │
│  │ • 预约挂号      │    │ • 创建病历      │    │ • 配置系统  │  │
│  │ • 查看病历      │    │ • 回复消息      │    │ • 监控系统  │  │
│  │ • 发送消息      │    │ • 查看通知      │    │             │  │
│  │ • 查看通知      │    │ • 更新资料      │    │             │  │
│  │ • 下载记录      │    │                 │    │             │  │
│  └─────────────────┘    └─────────────────┘    └─────────────┘  │
│           │                       │                       │      │
│           └───────────────────────┼───────────────────────┘      │
│                                   │                              │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    核心系统                                │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   认证      │  │   预约      │  │   病历      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 登录      │  │ • 创建      │  │ • 创建      │        │ │
│  │  │ • 注册      │  │ • 更新      │  │ • 查看      │        │ │
│  │  │ • 资料      │  │ • 取消      │  │ • 更新      │        │ │
│  │  │ • 密码      │  │ • 排班      │  │ • 下载      │        │ │
│  │  │             │  │ • 通知      │  │ • 上传      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   消息      │  │   通知      │  │   管理      │        │ │
│  │  │   模块      │  │   模块      │  │   模块      │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • 发送      │  │ • 创建      │  │ • 用户      │        │ │
│  │  │ • 接收      │  │ • 阅读      │  │   管理      │        │ │
│  │  │ • 历史      │  │ • 删除      │  │ • 统计      │        │ │
│  │  │ • 附件      │  │ • 国际化    │  │ • 设置      │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

**说明:**
需求图显示了系统上下文，包含三个主要用户角色（患者、医生、管理员）与核心系统模块的交互。每个角色都有特定的功能需求，系统分为六个主要模块：认证、预约管理、病历、消息、通知和管理。

### 2.2 使用SysML的块定义图

```
┌─────────────────────────────────────────────────────────────────┐
│                           用户                                  │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - name: String                                                  │
│ - email: String                                                 │
│ - password: String                                              │
│ - role: String (patient|doctor|admin)                          │
│ - phone: String                                                 │
│ - address: String                                               │
│ - dateOfBirth: Date                                             │
│ - gender: String                                                │
│ - specialization: String                                        │
│ - department: String                                            │
│ - isActive: Boolean                                             │
├─────────────────────────────────────────────────────────────────┤
│ + matchPassword(enteredPassword): Boolean                      │
│ + generateAuthToken(): String                                  │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        预约                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - patient: ObjectId (ref: User)                                │
│ - doctor: ObjectId (ref: User)                                 │
│ - date: Date                                                    │
│ - timeSlot: String                                              │
│ - status: String (pending|confirmed|cancelled|completed)       │
│ - type: String (consultation|follow-up|emergency)              │
│ - symptoms: String                                              │
│ - notes: String                                                 │
├─────────────────────────────────────────────────────────────────┤
│ + updateStatus(newStatus): void                                │
│ + cancel(reason, cancelledBy): void                            │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ 1
                                │
┌─────────────────────────────────────────────────────────────────┐
│                        病历                                    │
├─────────────────────────────────────────────────────────────────┤
│ - _id: ObjectId                                                 │
│ - patient: ObjectId (ref: User)                                │
│ - doctor: ObjectId (ref: User)                                 │
│ - appointment: ObjectId (ref: Appointment)                     │
│ - visitDate: Date                                               │
│ - symptoms: String                                              │
│ - diagnosis: String                                             │
│ - treatment: String                                             │
│ - prescription: Object                                          │
│ - vitalSigns: Object                                            │
│ - attachments: [Object]                                         │
├─────────────────────────────────────────────────────────────────┤
│ + addAttachment(file): void                                    │
│ + updateVitalSigns(signs): void                                │
└─────────────────────────────────────────────────────────────────┘
```

**说明:**
块定义图显示了核心数据模型及其关系。用户模型作为中央实体，具有三种角色（患者、医生、管理员）。预约连接患者和医生，而病历与预约关联并包含详细的医疗信息。该图展示了一对多的实体关系。

### 2.3 使用SysML的参数图

```
┌─────────────────────────────────────────────────────────────────┐
│                    系统性能参数                                │
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────┐  │
│  │   响应时间      │    │   吞吐量        │    │   容量      │  │
│  │                 │    │                 │    │             │  │
│  │                 │    │                 │    │             │  │
│  │ • API调用       │    │ • 并发用户: 100 │    │ • 数据库    │  │
│  │   < 200ms       │    │ • 请求/秒:      │    │   存储      │  │
│  │ • 页面加载      │    │   1000          │    │   10GB      │  │
│  │   < 2s          │    │ • 事务:         │    │ • 文件      │  │
│  │ • 搜索          │    │   500/秒        │    │   存储      │  │
│  │   < 500ms       │    │                 │    │   5GB       │  │
│  └─────────────────┘    └─────────────────┘    └─────────────┘  │
│           │                       │                       │      │
│           └───────────────────────┼───────────────────────┘      │
│                                   │                              │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    质量约束                                │ │
│  │                                                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │ │
│  │  │   安全性    │  │   可扩展性  │  │   可靠性    │        │ │
│  │  │             │  │             │  │             │        │ │
│  │  │ • JWT认证   │  │ • 水平扩展  │  │ • 99.9%     │        │ │
│  │  │ • HTTPS     │  │ • 负载均衡  │  │   运行时间  │        │ │
│  │  │ • 输入验证  │  │ • 缓存策略  │  │ • 自动备份  │        │ │
│  │  │ • 基于角色  │  │ • 数据库    │  │ • 错误处理  │        │ │
│  │  │   的访问    │  │   优化      │  │ • 监控告警  │        │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

**说明:**
参数图定义了系统的性能约束和质量属性。它指定了响应时间要求、吞吐量容量、存储限制、安全措施、可扩展性考虑和可靠性目标。这些参数指导系统设计和实现决策。

---

## 3. 项目管理 (JIRA)

### 3.1 公共JIRA看板链接
[在此提供您的公共JIRA看板链接]

### 3.2 产品待办事项截图
[插入您的JIRA产品待办事项截图]

### 3.3 项目时间线截图
[插入显示史诗和用户故事的截图]

### 3.4 带子任务的用户故事截图
[插入详细用户故事和子任务的截图]

### 3.5 冲刺计划截图
[插入冲刺计划看板截图]

### 3.6 冲刺开始截图
[插入活跃冲刺截图]

### 3.7 JIRA看板截图
[插入主JIRA看板截图]

### 3.8 完成的冲刺截图
[插入已完成冲刺截图]

### 3.9 来自JIRA的提交历史截图
[插入显示与JIRA问题链接的提交历史截图]

---

## 4. 后端开发、前端开发、GitHub版本控制与分支策略

### GitHub仓库链接
[提供您的GitHub仓库链接]

### 公共URL
[提供您的EC2实例公网IP地址]

### 实现概述:

#### 后端开发 (Node.js + Express + MongoDB)
- **RESTful API设计**: 40+个端点，涵盖所有CRUD操作
- **认证与授权**: 基于JWT的认证和基于角色的访问控制
- **数据模型**: 6个核心模型，具有适当的关系和验证
- **文件上传**: 支持病历附件
- **国际化**: 后端支持多语言通知
- **错误处理**: 全面的错误处理和日志记录
- **测试**: Mocha测试套件，覆盖率80%+

#### 前端开发 (React.js)
- **组件架构**: 模块化设计，可重用组件
- **状态管理**: 使用Context API进行全局状态管理
- **路由**: React Router用于导航和基于角色的路由
- **UI框架**: Material-UI用于一致和响应式设计
- **国际化**: 完整的i18n支持，支持语言切换
- **实时更新**: 实时通知系统
- **表单验证**: 客户端验证和错误处理

#### GitHub版本控制与分支策略
- **主分支**: 生产就绪代码
- **功能分支**: 个人功能开发
- **开发分支**: 集成测试
- **拉取请求工作流**: 代码审查和CI/CD集成
- **提交约定**: 与JIRA集成的约定提交

---

## 5. CI/CD流水线设置

### 5.1 YML文件截图
[插入您的GitHub Actions工作流YAML文件截图]

### 5.2 测试用例通过/失败状态截图
[插入终端测试执行结果截图]

### 5.3 GitHub Action配置截图
[插入显示运行器、环境和生产变量的截图]

### 5.4 EC2服务器配置截图
[插入PM2状态输出截图]

### 5.5 运行项目截图
[插入包含公网IP的运行应用程序截图]

### 5.6 最终工作流运行测试截图
[插入成功的GitHub Actions工作流执行截图]

---

## 6. README.md

[包含您的GitHub README.md文件链接或截图]

README.md文件包括:
- 项目概述和功能
- 技术栈
- 安装和设置说明
- API文档
- 部署指南
- 贡献指南
- 许可证信息

---

## 7. 讨论与结论

### 讨论
本项目成功演示了使用现代Web技术和DevOps实践实现全栈医疗管理系统的过程。该系统通过提供预约调度、病历管理和医患沟通的综合平台，解决了现实世界的医疗挑战。

主要成就包括:
- **可扩展架构**: MERN栈提供了出色的可扩展性和可维护性
- **安全实现**: JWT认证和基于角色的访问控制确保数据安全
- **用户体验**: 直观的界面，响应式设计和国际化
- **DevOps集成**: 自动化测试、部署和监控
- **代码质量**: 全面的测试和文档

### 结论
医疗预约和记录管理系统成功满足所有功能性和非功能性需求。该实现展示了在全栈开发、DevOps实践和软件生命周期管理方面的熟练程度。该项目为未来的医疗技术解决方案奠定了基础，并展示了现代Web应用程序开发的最佳实践。

---

## 反思

### 我学到了什么
1. **全栈开发**: 获得MERN栈的全面经验
2. **DevOps实践**: 学习CI/CD流水线实现和自动化部署
3. **项目管理**: 体验使用JIRA的敏捷开发
4. **系统设计**: 应用SysML建模进行软件架构设计
5. **测试策略**: 在多个层面实施全面测试
6. **安全最佳实践**: 应用认证和授权模式
7. **国际化**: 实施多语言支持
8. **版本控制**: 掌握Git工作流和分支策略

### 遇到的困难
1. **复杂状态管理**: 管理多个用户角色的应用程序状态
2. **实时功能**: 实施实时通知和更新
3. **文件上传安全**: 确保安全的文件处理和存储
4. **数据库优化**: 优化查询以提高性能
5. **部署配置**: 设置具有适当安全性的生产环境
6. **测试覆盖率**: 在所有组件中实现全面的测试覆盖率
7. **国际化**: 管理翻译和文化考虑
8. **CI/CD流水线**: 调试和优化自动化工作流

### 实施的解决方案
- 使用Context API进行集中状态管理
- 实施类似WebSocket的轮询进行实时更新
- 应用文件验证和安全存储实践
- 创建数据库索引和优化查询
- 使用环境变量和安全最佳实践
- 实施单元、集成和端到端测试
- 创建结构化翻译文件和语言切换
- 使用GitHub Actions，具有适当的错误处理和回滚

---

## 参考文献

American Psychological Association. (2020). *Publication manual of the American Psychological Association* (7th ed.). American Psychological Association.

Express.js. (2023). *Express.js web application framework*. https://expressjs.com/

MongoDB. (2023). *MongoDB documentation*. https://docs.mongodb.com/

React. (2023). *React documentation*. https://reactjs.org/docs/

Material-UI. (2023). *Material-UI React components*. https://mui.com/

Node.js. (2023). *Node.js documentation*. https://nodejs.org/en/docs/

GitHub Actions. (2023). *GitHub Actions documentation*. https://docs.github.com/en/actions

JIRA. (2023). *Atlassian JIRA documentation*. https://www.atlassian.com/software/jira

SysML. (2023). *Systems Modeling Language specification*. Object Management Group.

PM2. (2023). *PM2 process manager documentation*. https://pm2.keymetrics.io/docs/

---

**字数: [约2,500字]**

**提交日期: [您的提交日期]**
