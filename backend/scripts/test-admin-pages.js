const axios = require("axios"); const API_BASE_URL = "http://localhost:5001/api"; const tempAdmin = { email: "admin@healthcare.com", password: "admin123" }; async function testAdminPages() { console.log("ğŸ§ª æµ‹è¯•ç®¡ç†å‘˜é¡µé¢API...
"); try { console.log("1. ç®¡ç†å‘˜ç™»å½•..."); const loginResponse = await axios.post(`${API_BASE_URL}/auth/login`, tempAdmin); const token = loginResponse.data.token; console.log("âœ… ç™»å½•æˆåŠŸï¼Œè·å–token"); const headers = { Authorization: `Bearer ${token}` }; console.log("
2. æµ‹è¯•ç”¨æˆ·ç®¡ç†API..."); try { const usersResponse = await axios.get(`${API_BASE_URL}/admin/users`, { headers }); console.log("âœ… ç”¨æˆ·ç®¡ç†APIæ­£å¸¸"); console.log(`   ç”¨æˆ·æ•°é‡: ${usersResponse.data.users.length}`); if (usersResponse.data.users.length > 0) { const firstUser = usersResponse.data.users[0]; console.log(`   ç¬¬ä¸€ä¸ªç”¨æˆ·: ${firstUser.name} (${firstUser.email}) - ${firstUser.role}`); console.log(`   ç”¨æˆ·IDå­—æ®µ: _id = ${firstUser._id}, id = ${firstUser.id || "undefined"}`); } } catch (error) { console.log("âŒ ç”¨æˆ·ç®¡ç†APIå¤±è´¥:", error.response?.data?.message); } console.log("
ğŸ‰ ç®¡ç†å‘˜é¡µé¢APIæµ‹è¯•å®Œæˆï¼"); } catch (error) { console.error("âŒ æµ‹è¯•å¤±è´¥:", error.response?.data || error.message); } } testAdminPages();
